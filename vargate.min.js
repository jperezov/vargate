/**!
 * vargate v0.9.1
 * Copyright (c) 2018 .
 * Licensed under the MIT License.
 */
(function(){'use strict';var q="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,r="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,g){a!=Array.prototype&&a!=Object.prototype&&(a[c]=g.value)};function w(){w=function(){};q.Symbol||(q.Symbol=x)}var x=function(){var a=0;return function(c){return"jscomp_symbol_"+(c||"")+a++}}();
function y(){w();var a=q.Symbol.iterator;a||(a=q.Symbol.iterator=q.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&r(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return B(this)}});y=function(){}}function B(a){var c=0;return C(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})}function C(a){y();a={next:a};a[q.Symbol.iterator]=function(){return this};return a}function D(a){y();var c=a[Symbol.iterator];return c?c.call(a):B(a)}
function E(a,c){return Object.prototype.hasOwnProperty.call(a,c)}function F(a,c){if(c){var g=q;a=a.split(".");for(var e=0;e<a.length-1;e++){var f=a[e];f in g||(g[f]={});g=g[f]}a=a[a.length-1];e=g[a];c=c(e);c!=e&&null!=c&&r(g,a,{configurable:!0,writable:!0,value:c})}}
F("WeakMap",function(a){function c(a){this.a=(b+=Math.random()+1).toString();if(a){w();y();a=D(a);for(var d;!(d=a.next()).done;)d=d.value,this.set(d[0],d[1])}}function g(a){E(a,f)||r(a,f,{value:{}})}function e(a){var d=Object[a];d&&(Object[a]=function(a){g(a);return d(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),d=Object.seal({}),e=new a([[b,2],[d,3]]);if(2!=e.get(b)||3!=e.get(d))return!1;e.delete(b);e.set(d,4);return!e.has(b)&&4==e.get(d)}catch(I){return!1}}())return a;
var f="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var b=0;c.prototype.set=function(a,d){g(a);if(!E(a,f))throw Error("WeakMap key fail: "+a);a[f][this.a]=d;return this};c.prototype.get=function(a){return E(a,f)?a[f][this.a]:void 0};c.prototype.has=function(a){return E(a,f)&&E(a[f],this.a)};c.prototype.delete=function(a){return E(a,f)&&E(a[f],this.a)?delete a[f][this.a]:!1};return c});
F("Map",function(a){function c(){var a={};return a.g=a.next=a.head=a}function g(a,e){var d=a.a;return C(function(){if(d){for(;d.head!=a.a;)d=d.g;for(;d.next!=d.head;)return d=d.next,{done:!1,value:e(d)};d=null}return{done:!0,value:void 0}})}function e(a,e){var d=e&&typeof e;"object"==d||"function"==d?b.has(e)?d=b.get(e):(d=""+ ++l,b.set(e,d)):d="p_"+e;var c=a.f[d];if(c&&E(a.f,d))for(a=0;a<c.length;a++){var g=c[a];if(e!==e&&g.key!==g.key||e===g.key)return{id:d,list:c,index:a,c:g}}return{id:d,list:c,
index:-1,c:void 0}}function f(a){this.f={};this.a=c();this.size=0;if(a){a=D(a);for(var d;!(d=a.next()).done;)d=d.value,this.set(d[0],d[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),e=new a(D([[d,"s"]]));if("s"!=e.get(d)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var b=e.entries(),c=b.next();if(c.done||c.value[0]!=d||"s"!=c.value[1])return!1;c=b.next();return c.done||4!=c.value[0].x||
"t"!=c.value[1]||!b.next().done?!1:!0}catch(t){return!1}}())return a;w();y();var b=new WeakMap;f.prototype.set=function(a,b){var d=e(this,a);d.list||(d.list=this.f[d.id]=[]);d.c?d.c.value=b:(d.c={next:this.a,g:this.a.g,head:this.a,key:a,value:b},d.list.push(d.c),this.a.g.next=d.c,this.a.g=d.c,this.size++);return this};f.prototype.delete=function(a){a=e(this,a);return a.c&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.f[a.id],a.c.g.next=a.c.next,a.c.next.g=a.c.g,a.c.head=null,this.size--,
!0):!1};f.prototype.clear=function(){this.f={};this.a=this.a.g=c();this.size=0};f.prototype.has=function(a){return!!e(this,a).c};f.prototype.get=function(a){return(a=e(this,a).c)&&a.value};f.prototype.entries=function(){return g(this,function(a){return[a.key,a.value]})};f.prototype.keys=function(){return g(this,function(a){return a.key})};f.prototype.values=function(){return g(this,function(a){return a.value})};f.prototype.forEach=function(a,e){for(var d=this.entries(),b;!(b=d.next()).done;)b=b.value,
a.call(e,b[1],b[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var l=0;return f});
F("Set",function(a){function c(a){this.a=new Map;if(a){a=D(a);for(var e;!(e=a.next()).done;)this.add(e.value)}this.size=this.a.size}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),e=new a(D([c]));if(!e.has(c)||1!=e.size||e.add(c)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var f=e.entries(),b=f.next();if(b.done||b.value[0]!=c||b.value[1]!=c)return!1;b=f.next();return b.done||b.value[0]==c||4!=b.value[0].x||
b.value[1]!=b.value[0]?!1:f.next().done}catch(l){return!1}}())return a;w();y();c.prototype.add=function(a){this.a.set(a,a);this.size=this.a.size;return this};c.prototype.delete=function(a){a=this.a.delete(a);this.size=this.a.size;return a};c.prototype.clear=function(){this.a.clear();this.size=0};c.prototype.has=function(a){return this.a.has(a)};c.prototype.entries=function(){return this.a.entries()};c.prototype.values=function(){return this.a.values()};c.prototype.keys=c.prototype.values;c.prototype[Symbol.iterator]=
c.prototype.values;c.prototype.forEach=function(a,e){var c=this;this.a.forEach(function(b){return a.call(e,b,b,c)})};return c});
(function(a){function c(a,f){function d(a,b,c,f,g){f=f||this;"undefined"===typeof v[a]&&(v[a]={i:[],w:{},j:c,l:this,context:f});if(Array.isArray(b))if(2===b.length){var h=e.B()+":"+b[1].replace(/\./g,"-");var n="!==";var z=void 0;l(b[0],b[1],h,f)}else 3===b.length?(h=b[0],n=b[1],(z=b[2])&&z.toString().match(/^@\w+$/)&&!0!==g&&d(a,[z.slice(1),n,"@"+h],c,f,!0)):e.throw("Invalid number of arguments passed through: ["+b.join(",")+"] (should be [key, operator, condition])");else h=b,n="!==",z=void 0;try{v[a].i.push(h),
v[a].w[h]={H:n,o:z},"undefined"===typeof m[h]&&(m[h]={s:0,m:{}}),m[h].m[a]=!0,m[h].s++,-1!==h.indexOf(".")&&A++}catch(J){e.throw('Cannot set "'+JSON.stringify(b)+'" as a property')}}function b(a,b){"undefined"!==typeof b||e.h()||e.throw('"'+a+"\" set to 'undefined'. Was this intentional? Use 'unset(\""+a+"\")' if it was.")}function g(a){k[this.b+"."+a]||"undefined"===typeof f.get(a)||e.h()||e.throw('In "'+this.b+'" variable "'+a+'" defined in module "'+f.b+'". Choose a different name.')}function l(a,
b,e,d){var h=b.split(".");1===h.length&&"string"===typeof b?(b=b.replace(/[^\w$]/g,""),void 0===a[b]?Object.defineProperty(a,b,{configurable:!0,set:function(h){delete a[b];a[b]=h;d.set(e,a)}}):d.set(e,a)):l(a[h[0]],h.splice(1).join("."),e,d)}var t=this,p={},k={},v={},m={},A=0;this.b=a;this.A=function(a,b){b=b||p;a=this.b===t.b?t.b+"."+a:a;if(f)return f.A.call(this,a,b);e.log('Registering "'+a+'"',!0);p[a]=b[a]=new c(a,this);return p[a]};this.C=function(a){e.log('Creating new "'+a+'"',!0);return new c(a)};
this.D=function(a,b,e){this.f(a,[b,!0],e)};this.f=function(a,b,c){var h=this.b+"."+e.B();if(f)f.f.call(this,a,b,c);else if(a.length&&"string"!==typeof a){e.log(['Waiting in "'+this.b+'" for',a],!0);for(var n=0;n<a.length;n++)d.call(this,h,a[n],b,c||this);this.a(a[0])}else e.log(['Waiting in "'+this.b+'" for',a],!0),d.call(this,h,a,b,c||this),this.a(a+"")};this.set=function(a,d,c,u){c=c||k;u=(this.b===t.b?this.b+"."+a:u)+"";var h=a.split(".");h&&1<h.length?p[this.b+"."+h[0]].set(h.splice(1).join("."),
d,c,u):f?(g.call(this,a),f.set.call(this,a,d,c,u)):(k[u]=c[u]=d,b.call(this,a,d),e.log([Set+' "'+u+'" to value',d]),this.a(a))};this.F=function(a,d){b.call(this,a,d);e.h(!0);this.set(a,d);e.h(!1)};this.G=function(a){g.call(this,a);e.h(!0);a=this.set(a);e.h(!1);return a};this.get=function(a){var b=k[t.b+"."+a];return"undefined"!==typeof b?b:f?f.get.call(this,a):k[this.b+"."+a]};this.u=function(a){a=(t.b===this.b?k:a)||{};if(f)f.u.call(this,a);else{var b=new RegExp("^"+this.b+".[^.]*$"),d;for(d in a)a.hasOwnProperty(d)&&
d.match(b)&&(delete a[d],k.hasOwnProperty(d)&&delete k[d])}};this.v=function(){this.u();for(var a in p)p.hasOwnProperty(a)&&p[a].v()};this.a=function(a,b){if(f)f.a.call(this,a,b);else if("object"===typeof m[a]){var d=/^@\w+$/,c;for(c in m[a].m)if(m[a].m.hasOwnProperty(c)){b=v[c];var g=b.w,h=0,l=void 0;for(l in g)if(g.hasOwnProperty(l)){var k=g[l],n=b.l.get(l),p=k.o&&k.o.toString().match(d)?b.l.get(k.o.slice(1)):k.o;try{(new Function("l","r","return eval('l "+k.H+" r')"))(n,p)&&h++}catch(G){e.throw(G)}}if(h===
b.i.length){e.log("Conditions ["+b.i.join(",")+'] met for "'+b.l.b+'".',!0);h=[];for(k=0;k<b.i.length;k++)h.push(b.l.get(b.i[k]));if(b.j.length&&b.j[1])b.j[0].apply(b.context,h);else{for(l in g)g.hasOwnProperty(l)&&(delete m[l].m[c],m[l].s--,-1!==l.indexOf(".")&&A--,0===m[l].s&&delete m[l]);delete v[c];b.j.apply(b.context,h)}}}}else if(A&&!b)for(d in m)m.hasOwnProperty(d)&&(c=d.split("."))&&c.length&&c[c.length-1]===a&&t.a(d,!0)};this.parent=f;this.children=p;this.data=k;this.gate=v;this.gateMap=
m;this.subKeyWaitCount=A;this.register=this.A;this["new"]=this.C;this.on=this.D;this.when=this.f;this.set=this.set;this.override=this.F;this.unset=this.G;this.get=this.get;this.clearAll=this.v;this.unlock=this.a}var g=!1,e={throw:function(b){b="VarGate Error: "+b;switch(a.DEV_MODE){case "warn":try{console.error(b)}catch(l){}break;case "strict":throw b;}},log:function(b,c){var d=[];if(a.DEBUG_MODE){"string"!==typeof b&&b.length?d=b:d.push(b);d.unshift("VarGate SG1 Log:");try{switch(a.DEBUG_MODE){case "verbose":console.warn.apply(console,
d);break;case "static":console.warn.apply(console,JSON.parse(JSON.stringify(d)));break;case "minimal":c&&console.warn.apply(console,d)}}catch(H){}}},h:function(a){"boolean"===typeof a&&(g=a);return g},B:function(){for(var a=[],c=0;256>c;c++)a[c]=(16>c?"0":"")+c.toString(16);return function(){var b=4294967295*Math.random()|0,c=4294967295*Math.random()|0,e=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return a[b&255]+a[b>>8&255]+a[b>>16&255]+a[b>>24&255]+"-"+a[c&255]+a[c>>8&255]+"-"+a[c>>
16&15|64]+a[c>>24&255]+"-"+a[e&63|128]+a[e>>8&255]+"-"+a[e>>16&255]+a[e>>24&255]+a[f&255]+a[f>>8&255]+a[f>>16&255]+a[f>>24&255]}}()},f=new c("vargate");"function"===typeof a.define&&a.define.amd?a.define(function(){return f}):"object"===typeof a.module&&a.module.exports?a.module.exports=f:a.VarGate=f})("undefined"!==typeof window?window:this);}).call(this)
